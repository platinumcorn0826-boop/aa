<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MEMENTO — 時間は限られている</title>
  <meta name="description" content="残りの時間をリアルタイムで可視化する究極のカウントダウンツール。人生・年・月・週・日の残り時間を意識し、行動変容を促す。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/themes.css">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00d4ff">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MEMENTO">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>

<body>
  <!-- Toast Notification Area -->
  <div id="toast-container"></div>

  <!-- Main App -->
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1 class="logo">MEMENTO</h1>
        <span class="tagline">時間は限られている</span>
      </div>
      <button class="settings-btn" id="settingsBtn" aria-label="設定を開く">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42">
          </path>
        </svg>
      </button>
    </header>

    <!-- Mode Tabs -->
    <nav class="mode-tabs" id="modeTabs">
      <button class="mode-tab active" data-mode="day">
        <span class="tab-label">Day</span>
        <span class="tab-sub">今日</span>
      </button>
      <button class="mode-tab" data-mode="week">
        <span class="tab-label">Week</span>
        <span class="tab-sub">今週</span>
      </button>
      <button class="mode-tab" data-mode="month">
        <span class="tab-label">Month</span>
        <span class="tab-sub">今月</span>
      </button>
      <button class="mode-tab" data-mode="year">
        <span class="tab-label">Year</span>
        <span class="tab-sub">今年</span>
      </button>
      <button class="mode-tab" data-mode="life">
        <span class="tab-label">Life</span>
        <span class="tab-sub">人生</span>
      </button>
      <button class="mode-tab" data-mode="goal">
        <span class="tab-label">Goal</span>
        <span class="tab-sub">目標日</span>
      </button>
    </nav>

    <!-- Countdown Display -->
    <main class="countdown-main">
      <!-- Disposable Time Toggle -->
      <div class="filter-toggle">
        <label class="toggle-label" for="disposableToggle">
          <span class="toggle-text">自分の時間</span>
          <span class="toggle-hint" id="filterHint">全時間</span>
        </label>
        <div class="toggle-switch">
          <input type="checkbox" id="disposableToggle">
          <span class="toggle-slider"></span>
        </div>
      </div>

      <!-- Big Number Display -->
      <div class="countdown-display" id="countdownDisplay">
        <div class="countdown-value" id="countdownValue">
          <span class="count-number" id="countNumber">--</span>
        </div>
        <div class="countdown-unit" id="countdownUnit">読み込み中...</div>
        <div class="countdown-context" id="countdownContext"></div>
      </div>

      <!-- Circular Progress -->
      <div class="progress-circle-section">
        <div class="progress-circle-container">
          <svg class="progress-circle" viewBox="0 0 200 200">
            <circle class="progress-circle-bg" cx="100" cy="100" r="88"></circle>
            <circle class="progress-circle-fill" id="progressCircleFill" cx="100" cy="100" r="88"></circle>
          </svg>
          <!-- Hourglass SVG (Visible in Zen theme) -->
          <svg class="progress-hourglass" viewBox="0 0 100 160">
            <defs>
              <clipPath id="clipTop">
                <rect id="hourglassTopRect" x="0" y="0" width="100" height="80" />
              </clipPath>
              <clipPath id="clipBottom">
                <rect id="hourglassBottomRect" x="0" y="80" width="100" height="80" />
              </clipPath>
            </defs>
            <path class="hourglass-frame" d="M15,5 L85,5 L85,15 L15,15 Z M15,145 L85,145 L85,155 L15,155 Z" />
            <path class="hourglass-glass" d="M25,15 Q50,80 25,145 L75,145 Q50,80 75,15 Z" />
            <path class="sand-top" clip-path="url(#clipTop)" d="M25,15 Q50,80 25,145 L75,145 Q50,80 75,15 Z" />
            <path class="sand-bottom" clip-path="url(#clipBottom)" d="M25,15 Q50,80 25,145 L75,145 Q50,80 75,15 Z" />
            <line class="sand-stream" id="sandStream" x1="50" y1="78" x2="50" y2="145" />
          </svg>
          <div class="progress-circle-text">
            <span class="progress-percent" id="progressPercent">--%</span>
            <span class="progress-percent-label">残り</span>
          </div>
        </div>
        <div class="progress-circle-labels">
          <span class="progress-elapsed" id="progressElapsed">経過 --%</span>
          <span class="progress-remaining" id="progressRemaining">残り --%</span>
        </div>
      </div>

      <!-- Unit Selector -->
      <div class="unit-selector" id="unitSelector">
        <button class="unit-btn" data-unit="years">年</button>
        <button class="unit-btn" data-unit="days">日</button>
        <button class="unit-btn" data-unit="hours">時間</button>
        <button class="unit-btn" data-unit="minutes">分</button>
        <button class="unit-btn active" data-unit="seconds">秒</button>
      </div>

      <!-- Sub Stats -->
      <div class="sub-stats" id="subStats">
        <div class="stat-card">
          <div class="stat-value" id="statDays">--</div>
          <div class="stat-label">日</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statHours">--</div>
          <div class="stat-label">時間</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statMinutes">--</div>
          <div class="stat-label">分</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statSeconds">--</div>
          <div class="stat-label">秒</div>
        </div>
      </div>

      <!-- Motivational Message -->
      <div class="message-area" id="messageArea">
        <p class="message-text" id="messageText"></p>
      </div>
    </main>
  </div>

  <!-- Settings Panel (Slide-in) -->
  <div class="settings-overlay" id="settingsOverlay"></div>
  <aside class="settings-panel" id="settingsPanel">
    <div class="settings-header">
      <h2>設定</h2>
      <button class="close-btn" id="closeSettings" aria-label="設定を閉じる">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="settings-body">
      <!-- Theme Selection -->
      <div class="setting-group">
        <label class="setting-label">テーマ</label>
        <div class="theme-selector">
          <label class="theme-option">
            <input type="radio" name="theme" value="precision" checked>
            <span class="theme-card precision">
              <span class="theme-name">Precision</span>
            </span>
          </label>
          <label class="theme-option">
            <input type="radio" name="theme" value="zen">
            <span class="theme-card zen">
              <span class="theme-name">Zen</span>
            </span>
          </label>
          <label class="theme-option">
            <input type="radio" name="theme" value="obsidian">
            <span class="theme-card obsidian">
              <span class="theme-name">Obsidian</span>
            </span>
          </label>
        </div>
      </div>

      <hr class="setting-divider">

      <!-- Birthday -->
      <div class="setting-group">
        <label class="setting-label" for="birthday">生年月日</label>
        <input type="date" id="birthday" class="setting-input">
      </div>

      <!-- Goal Date -->
      <div class="setting-group">
        <label class="setting-label" for="goalDate">目標日</label>
        <input type="date" id="goalDate" class="setting-input">
      </div>

      <!-- Goal Name -->
      <div class="setting-group">
        <label class="setting-label" for="goalName">目標名</label>
        <input type="text" id="goalName" class="setting-input" placeholder="例: 資格試験、プロジェクト納品...">
      </div>

      <!-- Life Expectancy -->
      <div class="setting-group">
        <label class="setting-label" for="lifeExpectancy">
          想定寿命: <span id="lifeExpValue">80</span>歳
        </label>
        <input type="range" id="lifeExpectancy" min="50" max="120" value="80" class="setting-range">
      </div>

      <!-- Bedtime -->
      <div class="setting-group">
        <label class="setting-label" for="bedtime">就寝時刻</label>
        <input type="time" id="bedtime" value="23:00" class="setting-input">
      </div>

      <hr class="setting-divider">
      <h3 class="setting-section-title">固定時間ブロック（1日あたり）</h3>

      <!-- Sleep Hours -->
      <div class="setting-group">
        <label class="setting-label" for="sleepHours">
          睡眠: <span id="sleepValue">7</span>時間
        </label>
        <input type="range" id="sleepHours" min="4" max="12" value="7" step="0.5" class="setting-range">
      </div>

      <!-- Work Hours -->
      <div class="setting-group">
        <label class="setting-label" for="workHours">
          仕事: <span id="workValue">8</span>時間
        </label>
        <input type="range" id="workHours" min="0" max="16" value="8" step="0.5" class="setting-range">
      </div>

      <!-- Chores Hours -->
      <div class="setting-group">
        <label class="setting-label" for="choreHours">
          家事・身支度: <span id="choreValue">2</span>時間
        </label>
        <input type="range" id="choreHours" min="0" max="8" value="2" step="0.5" class="setting-range">
      </div>

      <!-- Commute Hours -->
      <div class="setting-group">
        <label class="setting-label" for="commuteHours">
          通勤・移動: <span id="commuteValue">1</span>時間
        </label>
        <input type="range" id="commuteHours" min="0" max="6" value="1" step="0.5" class="setting-range">
      </div>

      <!-- Disposable Summary -->
      <div class="disposable-summary">
        <div class="disposable-calc">
          <span>24時間 − <span id="fixedTotal">18</span>時間（固定）</span>
        </div>
        <div class="disposable-result">
          = <span id="disposableHours">6</span>時間 / 日の自分の時間
        </div>
      </div>
    </div>
  </aside>

  <script src="js/countdown.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/milestones.js"></script>
  <script src="js/app.js"></script>
</body>

</html>